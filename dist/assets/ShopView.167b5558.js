import{_ as S,F as w,m as C,r as c,o as r,c as l,a as o,b as _,d as b,w as d,v as p,e as k,f as m,g as h,u as B,h as A,i as x,t as g,j as a}from"./index.14df926a.js";import{u as E}from"./products.2abeeee1.js";import{u as L}from"./firestore.898c49cc.js";const U={data(){return{firebaseProducts:[],drawProducts:[],edit:!1,selectProd:"",name:"",category:"",description:"",price:"",rating:0,reader:new FileReader,imgURL:null}},components:{Footers:w},computed:{...C(E,L,B),uid(){return this.authenticationStore.getUser().uid},admin(){return this.authenticationStore.checkAdmin()}},methods:{formatPrice(i){let e=(i/1).toFixed(2).replace(".",",");return"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},sortBy(i){let e=i.target.value;this.productsStore.sortProducts(e)},filterBy(i,e){let u=i.target.value;this.productsStore.filter(u,e)},async editProduct(){const i={id:this.selectProd.id,name:this.name,category:this.category,description:this.description,price:this.price,rating:this.rating,image:this.imgURL};await this.firestoreStore.editProduct(this.selectProd.id,i),this.edit=!1},async deleteBook(){await this.firestoreStore.deleteProduct(this.selectProd.id),this.edit=!1},readImage(i){this.reader.readAsDataURL(i.target.files[0]),this.reader.addEventListener("load",()=>{this.imgURL=this.reader.result})},openEdit(i,e){i.preventDefault(),this.edit=!0,this.selectProd=e},closeEdit(){this.edit=!1}},async mounted(){this.drawProducts=await this.firestoreStore.getProducts()}},V={class:"top"},F=o("h1",{class:"top__title"},"SHOP ALL",-1),R={class:"top__filters"},D=o("label",{for:"category"},"Categories",-1),N=a('<option value=" ">All</option><option value="0">Coffee</option><option value="1">Tea</option><option value="2">Accesories</option><option value="3">Kits</option><option value="4">Single Serve</option>',6),T=[N],I=o("label",{for:"price"},"Prices",-1),K=a('<option value="">Price</option><option value="0">$20 or less</option><option value="1">$30 or less</option><option value="2">$50 or less</option><option value="3">$50 +</option>',5),M=[K],O=o("label",{for:"rating"},"Rating",-1),Z=a('<option value="">Rating</option><option value="0">1</option><option value="1">2</option><option value="2">3</option><option value="3">4</option><option value="4">5</option>',6),j=[Z],z=o("label",{for:"order"},"Order\xA0from",-1),H=a('<option value=" ">Select an option</option><option value="0">A -&gt; Z</option><option value="1">Z -&gt; A</option><option value="2">Price: low to high</option><option value="3">Price: high to low</option>',5),X=[H],q={class:"shop"},G=["src"],J={class:"shop__info"},Q={class:"shop__info__name"},W={class:"shop__info__price"},Y=["onClick"],$={key:0,class:"form",id:"form"},ee=o("h1",{class:"form__title"},"Edit Product",-1),te=a('<option hidden disabled selected value>Select a category</option><option value="Coffee">Coffee</option><option value="Tea">Tea</option><option value="Accessories">Accessories</option><option value="Kit">Kit</option><option value="Single">Single Serve</option>',6),oe=[te];function ie(i,e,u,se,s,n){const f=c("RouterLink"),v=c("star-rating"),y=c("Footers");return r(),l(_,null,[o("div",V,[F,o("section",R,[D,o("select",{name:"category",id:"category",onChange:e[0]||(e[0]=t=>n.filterBy(t,"type"))},T,32),I,o("select",{name:"price",id:"price",onChange:e[1]||(e[1]=t=>n.filterBy(t,"cost"))},M,32),O,o("select",{name:"rating",id:"rating",onChange:e[2]||(e[2]=t=>n.filterBy(t,"rating"))},j,32),z,o("select",{name:"order",id:"order",onChange:e[3]||(e[3]=t=>n.sortBy(t))},X,32)])]),o("div",q,[(r(!0),l(_,null,b(s.drawProducts,t=>(r(),A(f,{key:t.id,to:`/detail/${t.id}`},{default:x(()=>[o("img",{class:"shop__pic",src:t.image,alt:"preview"},null,8,G),o("div",J,[o("h4",Q,g(t.name),1),o("p",W,g(n.formatPrice(t.price)),1),n.admin?(r(),l("button",{key:0,class:"shop__info__edit",id:"shop__info__edit",onClick:P=>n.openEdit(P,t)}," EDIT ",8,Y)):h("",!0)])]),_:2},1032,["to"]))),128))]),s.edit?(r(),l("form",$,[ee,o("button",{class:"form__close",onClick:e[4]||(e[4]=(...t)=>n.closeEdit&&n.closeEdit(...t))},"X"),d(o("input",{placeholder:"name","onUpdate:modelValue":e[5]||(e[5]=t=>s.name=t),type:"text",name:"Name",id:"Name",class:"form__input"},null,512),[[p,s.name]]),d(o("select",{placeholder:"category",name:"category",id:"category",class:"form__input","onUpdate:modelValue":e[6]||(e[6]=t=>s.category=t)},oe,512),[[k,s.category]]),d(o("textarea",{placeholder:"description","onUpdate:modelValue":e[7]||(e[7]=t=>s.description=t),type:"text",name:"Description",id:"Description",class:"form__input"},`
    `,512),[[p,s.description]]),d(o("input",{placeholder:"price","onUpdate:modelValue":e[8]||(e[8]=t=>s.price=t),type:"number",name:"Price",id:"Price",class:"form__input"},null,512),[[p,s.price]]),m(v,{increment:.5,rating:s.rating,"onUpdate:rating":e[9]||(e[9]=t=>s.rating=t),"inactive-color":"#000","active-color":"#F2BA42","rounded-corners":!0,"border-width":2,"star-size":40,class:"form__input__star"},null,8,["increment","rating"]),o("input",{placeholder:"img",type:"file",name:"img",id:"newProduct",class:"form__input",multiple:"",onChange:e[10]||(e[10]=(...t)=>n.readImage&&n.readImage(...t))},null,32),o("button",{type:"submit",class:"form__button",onClick:e[11]||(e[11]=t=>n.editProduct())}," Edit Product ")])):h("",!0),m(y)],64)}const le=S(U,[["render",ie]]);export{le as default};
